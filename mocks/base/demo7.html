<html>
<head>
  <link rel="stylesheet" href="mittens.css" type="text/css" /> 
  <style type="text/css">
  #line-chart {
    cursor: crosshair;
  }
  #zoom-out {
    display: none;
    position: absolute;
    left: 50px;
    top: 20px;
    z-index: 20;
  }
  </style>

  <script type="text/javascript" src="http://www.google.com/jsapi"></script> 
  <script type="text/javascript"> 
    google.load('visualization', '1');
  </script> 
  <script type="text/javascript" src="dygraph-combined.js"></script> 
  <script type="text/javascript" src="dygraph2.js"></script> 
  <script type="text/javascript" src="dygraph-canvas.js"></script> 
  <script type="text/javascript" src="mittens.js"></script> 
  <script type="text/javascript" src="data.js"></script> 
  <script type="text/javascript" src="interaction.js"></script> 
  <script type="text/javascript"> 
    function draw() {
      var opts = {
        labelsKMB: true,
        includeZero: true,
        width: 670,
        height: 350,
        labelsDiv: 'line-legend',
        labelsSeparateLines: false,
        xAxisLabelFormatter: function(d, g) {
          if (g == Dygraph.ANNUAL) {
            return d.getFullYear();
          } else {
            return Dygraph.dateAxisFormatter(d, g);
          }
        },
        labelsDivStyles: {
          'text-size': '13px',
        },
        axisLabelFontSize: 13,
        legend: 'always',
        ylabel: 'Normalized Search Activity (&sigma;)',
        yAxisLabelWidth: 40,
        gridLineColor: 'rgb(196,196,196)',
        strokeWidth: 1.25,
        colors: [ '#3366CC', '#DC3912' ],
        drawCallback: function(g) {
          if (g.isZoomed()) {
            document.getElementById('zoom-out').style.display = 'block';
          } else {
            document.getElementById('zoom-out').style.display = 'none';
          }
        },
        interactionModel: {
          mousedown: Dygraph.defaultInteractionModel.mousedown,
          mousemove: Dygraph.defaultInteractionModel.mousemove,
          mouseup: Dygraph.defaultInteractionModel.mouseup,
          mouseout: Dygraph.defaultInteractionModel.mouseout,
          dblclick: dblClickV3,
          mousewheel: scrollV3
        }
      };

      g = new Dygraph.GVizChart(document.getElementById('line-chart'));
      g.draw(cd.getDataTable(), opts);
      lastClickedGraph = g.date_graph;
    }

    google.setOnLoadCallback(draw);
  </script>
</head>
<body>
  <div style='position: absolute; left: 50px; top: 50px;'>
    <button id='zoom-out' onClick='restorePositioning(g)'>Reset</button>
    <div id='line-legend'></div>
    <div id='line-chart'></div>
  </div>
  <div id='info'>
    Two-dimensional zooming, scroll wheel, double-click.
  </div>
</body>
</html>
